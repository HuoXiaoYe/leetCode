<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>虚拟DOM</title>
</head>

<body>
    <div id="root">
        <p class="name">name:tuanjie"</p>
        <ul class="hobby">
            <li>game</li>
            <li>music</li>
            <li>code</li>
        </ul>
    </div>
    <script>
        const node = document.getElementsByTagName("div")[0]
        console.log(node.nodeName)
        /** 
         * @params() node 根元素
        */
        function createVirtualDom(node) {
            let VNode = {};
            if (node.nodeType == 1) { // 元素节点
                VNode.tag = node.nodeName.toLowerCase();
                VNode.type = node.nodeType
                VNode.data = {}
                let attr = node.attributes;
                for (let i = 0; i < attr.length; i++) {
                    VNode.data[attr[i].nodeName] = attr[i].nodeValue
                }
                let childNodeArr = node.childNodes
                VNode.children = [];
                for (let i = 0; i < childNodeArr.length; i++) {
                    VNode.children.push(createVirtualDom(childNodeArr[i]))
                }

            } else if (node.nodeType === 3) { // 文本节点
                VNode.tag = undefined;
                VNode.type = node.nodeType
                VNode.value = node.nodeValue
            }
            return VNode
        }
        console.log(createVirtualDom(node))
    </script>
</body>

</html>